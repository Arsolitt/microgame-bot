# NATS Server Configuration for Local Development Cluster
# This configuration uses NKeys for authentication
# Generated on: Wed Oct  8 01:57:21 PM +05 2025

# Server connection settings
port: 4222
http_port: 8222

# Cluster configuration
cluster {
    name: $NATS_CLUSTER_NAME
    port: 6222
    
    # Routes to other cluster members
    routes = [
        $NATS_ROUTES
    ]
}

# Enable JetStream
jetstream {
    store_dir: $NATS_STORE_DIR
    max_memory_store: 1GB
    max_file_store: 10GB
}

# Authorization using NKeys
authorization {
    users = [
        # Admin user - full permissions
        {
            nkey: "UCGYZXPO7Y46NJCEYYIURNVQNIW53KDCAZ4MWO7NQW47HKJEMUNK44YL"
            # permissions = {
            #     publish = ">"
            #     subscribe = ">"
            # }
        },
        # App user - restricted permissions
        # {
        #     nkey: "UDYR77PTBLTEMIPUAK2JNXWPBX5VUZV35HVQQRXNTX3VYHIVCGKSFXNQ"
        #     permissions = {
        #         publish = {
        #             allow = ["order.>", "payments.>", "notifications.>", "tasks.>", "core.>", "$JS.>", "_INBOX.>"]
        #         }
        #         subscribe = {
        #             allow = ["order.>", "payments.>", "notifications.>", "tasks.>", "core.>", "$JS.>", "_INBOX.>"]
        #         }
        #     }
        # }
    ]
}

# Logging
debug: false
trace: false
logtime: true

# Performance tuning
max_payload: 8MB
max_connections: 100
max_control_line: 4096

# Write deadline
write_deadline: "10s"

# Monitoring
server_name: $NATS_SERVER_NAME
